{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/TIM/Desktop/cs/vue3/uniMyspace/校园能手2/pages/discover/group/group.vue?f6bc","webpack:///C:/Users/TIM/Desktop/cs/vue3/uniMyspace/校园能手2/pages/discover/group/group.vue?3c7d","webpack:///C:/Users/TIM/Desktop/cs/vue3/uniMyspace/校园能手2/pages/discover/group/group.vue?437a","webpack:///C:/Users/TIM/Desktop/cs/vue3/uniMyspace/校园能手2/pages/discover/group/group.vue?7b89","uni-app:///pages/discover/group/group.vue"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","auth","data","actionlist","actionshow","SystemInfo","modalName","contList","page","limit","list","load","orderby","back","top","current","Discover","id","title","scrollTop","navbar","sharetitle","sharepath","avatar","shadowStyle","backgroundImage","sxlist","name","sxcurrent","computed","userinfo","hasLogin","onShow","uni","onLoad","text","type","color","fontSize","subText","onPageScroll","onPullDownRefresh","onReachBottom","onShareAppMessage","console","path","methods","sxchange","parseLoaded","updateGroup","count","success","uniCloud","filePath","cloudPath","onUploadProgress","progressEvent","images","funct","imgs","that","cover","content","showCancel","fail","complete","updateDis","db","where","status","_id","update","icon","getDiscover","get","getOne","getContent","cid","field","orderBy","skip","share","actionclose","actionclick","admindel","remove","then","actionmenuCallback","getuinfo","url","postdeta","release","login","authSuccess"],"mappings":";;;;;;;;;;;;;AAAA;AAE2D;AAC3D;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;;;AAGpD;AACuL;AACvL,gBAAgB,qLAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,mNAEN;AACP,KAAK;AACL;AACA,aAAa,qOAEN;AACP,KAAK;AACL;AACA,aAAa,mQAEN;AACP,KAAK;AACL;AACA,aAAa,mNAEN;AACP,KAAK;AACL;AACA,aAAa,uMAEN;AACP,KAAK;AACL;AACA,aAAa,uPAEN;AACP,KAAK;AACL;AACA,aAAa,qRAEN;AACP,KAAK;AACL;AACA,aAAa,oSAEN;AACP,KAAK;AACL;AACA,aAAa,oSAEN;AACP,KAAK;AACL;AACA,aAAa,+NAEN;AACP,KAAK;AACL;AACA,aAAa,uPAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACtHA;AAAA;AAAA;AAAA;AAAssB,CAAgB,upBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;AC+K1tB;AAIA;AAEA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAGA;AAAA,eACA;EACAC;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;QACAJ;QACAC;QACAC;QACAC;QACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAR;MACAC;MACAQ;MACAC;MACAP;MACAQ;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;MACA;MACAC;QACAC;MACA;QACAA;MACA;MACAC;IACA;EACA;EACAC,4BACA;IACAC;IACAC;EACA,GACA;EACAC;IACA;MACAC;MACA;IACA;EACA;EACAC;IACA;IACA;IACA;IACA;IACA;IACA;MACAD;QACAf;MACA;MACA;IACA;IACA;MACA,mBACA;QACAiB;QACAC;MACA;QACAD;QACAE;MACA,GACA;QACAF;QACAE;QACAC;QACAC;MACA,EACA;IACA;MACA,mBACA;QACAJ;QACAC;MACA;QACAD;QACAE;MACA,EACA;IACA;EACA;EACAG;IACA;MACA;MACA;IACA;MACA;MACA;IACA;IACA;EACA;EACAC;IACA;IACA;IACA;IACA;EACA;EACAC;IACA;MACA;MACA;MACA;IACA;EACA;EACAC;IACA;MAAA;MACAC;IACA;IACA;MACA1B;MACA2B;IACA;EACA;EACAC;IACAC;MACA;MACA;QACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;QACA;QACAhB;UACAiB;UACAC;YACA;cACA;cACAC;gBACAC;gBACAC;gBACAC;kBACA,kCACAC,iDACA;gBACA;gBACAL;kBACAlB;oBACAf;kBACA;kBACA;kBACAuC;kBACAL;oBACAzB;oBACAzB;sBACAwD;sBACAC;oBACA;kBACA;oBACA1B;oBACA;sBACA;wBACA2B;0BAAAC;wBAAA;sBACA;wBACAD;0BAAAnC;wBAAA;sBACA;oBACA;sBACAQ;wBACA6B;wBACAC;sBACA;oBACA;kBACA;oBACA9B;sBACA6B;sBACAC;oBACA;kBACA;gBACA;gBACAC;kBACA/B;oBACA6B;oBACAC;kBACA;gBACA;gBACAE;cACA;YACA;UACA;QACA;MACA;IACA;IACAC;MAAA;MACAC,+BACAC;QACAC;QACAC;MACA,GACAC;QACAtC;UACAuC;UACAtD;QACA;QACA;MACA;QACAe;UACA6B;UACAC;QACA;MACA;QACA;MACA;IACA;IACAU;MAAA;MACAN,+BACAC;QACAC;QACAC;MACA,GACAI;QACAC;MACA;QACA;QACA;UACA;UACA;QACA;MACA;QACA1C;UACA6B;UACAC;QACA;MACA,wBAEA;IACA;IACAa;MAAA;MACA;MACAT,gEACAC;QACAC;QACAQ;MACA,GACAC,MACA,kKACA,CACAC,+CACAC,WACAvE,2CACAiE;QACA;QACA;UACA;QACA;UACA;QACA;QACAzC;QACAA;QACA;MACA;QACAA;QACAA;QACAA;UACA6B;UACAC;QACA;MACA;QACA9B;QACAA;MACA;IACA;IACAgD;MACA;MACA;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;QACA;UAEA;QACA;UACA,oBAEA;YACA;UACA;UACA;QACA;UACA;YACA;UACA;YACAlD;cACAuC;cACAtD;YACA;UACA;UACA;MAAA;IAEA;IACAkE;MACA;MACAnD;QACAf;QACA4C;QACAX;UACA;YACAgB,uCACAC;cACAE;YACA,GACAe,SACAC;cACArD;gBACAf;cACA;YACA;cACAe;gBACA6B;gBACAC;cACA;YACA,wBAEA;UACA;YACAnB;UACA;QACA;MACA;IACA;IACA2C;MACA;MACA;QACA;QACA;MACA;IACA;IACAC;MACAvD;QACAwD;MACA;IACA;IACAC;MACAzD;QACAwD;MACA;IACA;IACAE;MACA;QACA1D;UACAwD;QACA;MACA;QACA;MACA;IACA;IACAG;MAEA;IAOA;IACAC;MACA;IAAA;EAEA;AACA;AAAA,2B","file":"pages/discover/group/group.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;import '@dcloudio/vue-cli-plugin-uni/packages/uni-cloud/dist/index.js';\nimport Vue from 'vue'\nimport Page from './pages/discover/group/group.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./group.vue?vue&type=template&id=0c18257c&\"\nvar renderjs\nimport script from \"./group.vue?vue&type=script&lang=js&\"\nexport * from \"./group.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/discover/group/group.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./group.vue?vue&type=template&id=0c18257c&\"","var components\ntry {\n  components = {\n    uNavbar: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-navbar/u-navbar\" */ \"@/uview-ui/components/u-navbar/u-navbar.vue\"\n      )\n    },\n    uReadMore: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-read-more/u-read-more\" */ \"@/uview-ui/components/u-read-more/u-read-more.vue\"\n      )\n    },\n    uParse: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-parse/u-parse\" */ \"@/uview-ui/components/u-parse/u-parse.vue\"\n      )\n    },\n    uSticky: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-sticky/u-sticky\" */ \"@/uview-ui/components/u-sticky/u-sticky.vue\"\n      )\n    },\n    uTabs: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-tabs/u-tabs\" */ \"@/uview-ui/components/u-tabs/u-tabs.vue\"\n      )\n    },\n    uniList: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-list/components/uni-list/uni-list\" */ \"@/uni_modules/uni-list/components/uni-list/uni-list.vue\"\n      )\n    },\n    uniListItem: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-list/components/uni-list-item/uni-list-item\" */ \"@/uni_modules/uni-list/components/uni-list-item/uni-list-item.vue\"\n      )\n    },\n    uniLoadMore: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-load-more/components/uni-load-more/uni-load-more\" */ \"@/uni_modules/uni-load-more/components/uni-load-more/uni-load-more.vue\"\n      )\n    },\n    uniEasyinput: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput\" */ \"@/uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput.vue\"\n      )\n    },\n    uBackTop: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-back-top/u-back-top\" */ \"@/uview-ui/components/u-back-top/u-back-top.vue\"\n      )\n    },\n    uActionSheet: function () {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-action-sheet/u-action-sheet\" */ \"@/uview-ui/components/u-action-sheet/u-action-sheet.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 =\n    _vm.Discover && !_vm.Discover.cover ? _vm.Discover.name.slice(0, 1) : null\n  var l0 = _vm.Discover\n    ? _vm.__map(_vm.contList[_vm.sxcurrent].list, function (res, index) {\n        var $orig = _vm.__get_orig(res)\n        var g1 = res.school_id.length\n        var g2 = _vm.$u.timeFormat(res.create_date, \"yyyy-mm-dd hh:MM:ss\")\n        var g3 = res.images.length\n        var g4 = res.avatar && res.avatar.length\n        return {\n          $orig: $orig,\n          g1: g1,\n          g2: g2,\n          g3: g3,\n          g4: g4,\n        }\n      })\n    : null\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.modalName = \"bottomModal\"\n    }\n    _vm.e1 = function ($event) {\n      _vm.modalName = null\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        l0: l0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./group.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../develop/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./group.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"\">\r\n\t\t<u-navbar v-if=\"navbar\" :title=\"title\"></u-navbar>\r\n\t\t<template v-if=\"Discover\">\r\n\t\t\t<view v-if=\"Discover.backgroundImage\" @click=\"updateGroup('backgroundImage')\"\r\n\t\t\t\tstyle=\"height: 580rpx;background-repeat: no-repeat;background-size: 100% 100%;\"\r\n\t\t\t\t:style=\"[{ backgroundImage:'url(' + Discover.backgroundImage+ ')' }]\"></view>\r\n\t\t\t<view v-else @click=\"updateGroup('backgroundImage')\"\r\n\t\t\t\tstyle=\"height: 580rpx;background-image: linear-gradient(to left, #00cdac 0%, #8ddad5 100%);\">\r\n\t\t\t</view>\r\n\t\t\t<view class=\"\" style=\"position: absolute;width: 100%;\" :style=\"[{top:top+'rpx'}]\">\r\n\t\t\t\t<view class=\"flex flex-wrap align-center padding-sm\">\r\n\t\t\t\t\t<view class=\"basis-xl flex\">\r\n\t\t\t\t\t\t<view class=\"\" @click=\"updateGroup('cover')\">\r\n\t\t\t\t\t\t\t<view v-if=\"Discover.cover\" class=\"cu-avatar xl radius\"\r\n\t\t\t\t\t\t\t\t:style=\"[{ backgroundImage:'url(' + Discover.cover+ ')' }]\"></view>\r\n\t\t\t\t\t\t\t<view v-else class=\"cu-avatar xl radius bg-green\">{{Discover.name.slice(0,1)}}</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"text-white\" style=\"line-height: 66rpx;\">\r\n\t\t\t\t\t\t\t<view class=\"margin-left-sm\" style=\"font-weight: 700;font-size: 34rpx;\">\r\n\t\t\t\t\t\t\t\t#{{Discover.name}}#\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"\">\r\n\t\t\t\t\t\t\t\t<view class=\"cu-avatar-group\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"cu-avatar round sm\" v-for=\"(item,index) in avatar\" :key=\"index\"\r\n\t\t\t\t\t\t\t\t\t\t:style=\"[{ backgroundImage:'url(' + avatar[index] + ')' }]\"></view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<text style=\"font-size: 24rpx;\">5.2万人在这里</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"text-center\" style=\"width: 20%;\">\r\n\t\t\t\t\t\t<button class=\"cu-btn round bg-blue\" @click=\"release(Discover.name)\">发布</button>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"bg-white padding-sm radis-img\" style=\"margin: 0 15rpx;margin-bottom: 15rpx;\">\r\n\t\t\t\t\t<view class=\"padding-top-sm padding-bottom-sm solid-bottom margin-bottom-sm\"\r\n\t\t\t\t\t\tstyle=\"font-weight: 700;font-size: 34rpx;\" v-if=\"userinfo\">\r\n\t\t\t\t\t\tHi,{{userinfo.nickName}}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- #ifdef MP-WEIXIN -->\r\n\t\t\t\t\t<view class=\"\" @click=\"modalName='bottomModal'\">\r\n\t\t\t\t\t\t<u-read-more ref=\"uReadMore\" font-size='26' :toggle=\"true\" show-height=\"220\" :shadow-style=\"shadowStyle\">\r\n\t\t\t\t\t\t\t<u-parse font-size=\"26\" :html=\"Discover.description\" @load=\"parseLoaded\"></u-parse>\r\n\t\t\t\t\t\t</u-read-more>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- #endif -->\r\n\t\t\t\t\t<!-- #ifdef MP-QQ -->\r\n\t\t\t\t\t<view class=\"\" @click=\"modalName='bottomModal'\">\r\n\t\t\t\t\t\t<u-read-more ref=\"uReadMore\" font-size=\"26\" :toggle=\"true\" show-height=\"220\" :shadow-style=\"shadowStyle\">\r\n\t\t\t\t\t\t\t<u-parse font-size=\"26\" :html=\"Discover.description\" @load=\"parseLoaded\"></u-parse>\r\n\t\t\t\t\t\t</u-read-more>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- #endif -->\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<!-- #ifdef MP-WEIXIN -->\r\n\t\t\t\t<u-sticky :offset-top=\"88+SystemInfo.statusBarHeight * 2\">\r\n\t\t\t\t\t<view class=\"\">\r\n\t\t\t\t\t\t<u-tabs :list=\"sxlist\" :is-scroll=\"false\" :current=\"sxcurrent\" @change=\"sxchange\" bar-width=\"90\"\r\n\t\t\t\t\t\t\tactive-color=\"#0081ff\"></u-tabs>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</u-sticky>\r\n\t\t\t\t<!-- #endif -->\r\n\t\t\t\t<!-- #ifdef MP-QQ -->\r\n\t\t\t\t<view class=\"\">\r\n\t\t\t\t\t<u-tabs :list=\"sxlist\" :is-scroll=\"false\" :current=\"sxcurrent\" @change=\"sxchange\" bar-width=\"90\"\r\n\t\t\t\t\t\tactive-color=\"#0081ff\"></u-tabs>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- #endif -->\r\n\t\t\t\t<!-- #ifndef MP -->\r\n\t\t\t\t<u-sticky>\r\n\t\t\t\t\t<view class=\"\">\r\n\t\t\t\t\t\t<u-tabs :list=\"sxlist\" :is-scroll=\"false\" :current=\"sxcurrent\" @change=\"sxchange\" bar-width=\"90\"\r\n\t\t\t\t\t\t\tactive-color=\"#0081ff\"></u-tabs>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</u-sticky>\r\n\t\t\t\t<!-- #endif -->\r\n\t\t\t\t<uni-list>\r\n\t\t\t\t\t<uni-list-item :border=\"false\" v-for=\"(res,index) in contList[sxcurrent].list\" :key=\"index\">\r\n\t\t\t\t\t\t<view slot=\"body\" class=\"bg-white padding\"\r\n\t\t\t\t\t\t\tstyle=\"margin: 10rpx 14rpx;width: 100%;border-radius: 18rpx;\">\r\n\t\t\t\t\t\t\t<view class=\"flex justify-between align-center \">\r\n\t\t\t\t\t\t\t\t<view class=\"flex align-center\"  @click=\"getuinfo(res.uid[0]._id)\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"\">\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"cu-avatar  round\"\r\n\t\t\t\t\t\t\t\t\t\t\t:style=\"[{ backgroundImage:'url(' + res.uid[0].avatar+ ')' }]\"></view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"margin-left-sm\">\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"\" style=\"font-weight: bold;font-size: 24rpx;\">\r\n\t\t\t\t\t\t\t\t\t\t\t{{res.uid[0].nickName}}\r\n\t\t\t\t\t\t\t\t\t\t\t<view v-if=\"res.school_id.length\" class=\"cu-avatar sm round shadow-warp\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t:style=\"[{ backgroundImage:'url(' + res.school_id[0].logo+ ')' }]\">\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"\" style=\"font-size: 20rpx;color: #909399;\">\r\n\t\t\t\t\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"font-size: 24rpx;\">{{$u.timeFormat(res.create_date, 'yyyy-mm-dd hh:MM:ss')}}</text>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"\" @click=\"share(res)\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"cuIcon-more\"></text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"\" @click=\"postdeta(res._id)\">\r\n\t\t\t\t\t\t\t\t<view class=\"padding-top-sm\" style=\"font-size: 26rpx;\">\r\n\t\t\t\t\t\t\t\t\t{{res.content}}\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"grid col-3 padding-top-sm\" v-if=\"res.images.length\">\r\n\t\t\t\t\t\t\t\t\t<view style=\"padding: 6rpx;\" v-for=\"(item,index) in res.images\" :key=\"index\">\r\n\t\t\t\t\t\t\t\t\t\t<image :src=\"item.url || item\" mode=\"aspectFill\"\r\n\t\t\t\t\t\t\t\t\t\t\tstyle=\"width: 100%;height: 200rpx;border-radius: 12rpx;\"></image>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"margin-top flex align-center\" v-if=\"res.avatar && res.avatar.length\">\r\n\t\t\t\t\t\t\t\t<view class=\"cu-avatar-group\" style=\"padding: 0 10rpx 0 16rpx;\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"cu-avatar round sm\" v-for=\"(item,index) in res.avatar\" :key=\"index\"\r\n\t\t\t\t\t\t\t\t\t\t:style=\"[{ backgroundImage:'url(' + item + ')' }]\"></view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<text class=\"text-gray\" style=\"font-size: 24rpx;\">已有{{res.common_num}}+人评论</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"padding-top-sm\" v-if=\"res.location\">\r\n\t\t\t\t\t\t\t\t<view class=\"cu-tag sm light bg-cyan\" style=\"border-radius: 29rpx;\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"cuIcon-location\"></text> {{res.location.name}}\r\n\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"flex justify-between text-gray margin-top-sm text-xl\">\r\n\t\t\t\t\t\t\t\t<view class=\"\" style=\"margin-right: 40rpx;\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"cuIcon-like\"></text>\r\n\t\t\t\t\t\t\t\t\t{{res.collect_num ? res.collect_num : ''}}\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"\" style=\"margin-right: 40rpx;\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"cuIcon-mark\"></text>\r\n\t\t\t\t\t\t\t\t\t{{res.common_num ? res.common_num : ''}}\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"cuIcon-attention\"></text>\r\n\t\t\t\t\t\t\t\t\t{{res.view ? res.view : ''}}\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</uni-list-item>\r\n\t\t\t\t</uni-list>\r\n\t\t\t\t<uni-load-more :status=\"contList[sxcurrent].load\"></uni-load-more>\r\n\t\t\t</view>\r\n\t\t</template>\r\n\r\n\t\t<view class=\"cu-modal\" :class=\"userinfo._id==Discover.uid && modalName=='bottomModal'?'show':''\">\r\n\t\t\t<view class=\"cu-dialog\">\r\n\t\t\t\t<view class=\"cu-bar bg-white justify-end\">\r\n\t\t\t\t\t<view class=\"content\">修改简介</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"padding-sm\">\r\n\t\t\t\t\t<uni-easyinput type=\"textarea\" trim=\"all\" autoHeight v-model=\"Discover.description\" placeholder=\"请输入内容\"></uni-easyinput>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"cu-bar bg-white justify-end\">\r\n\t\t\t\t\t<view class=\"action\">\r\n\t\t\t\t\t\t<button class=\"cu-btn line-green text-green\"  @tap=\"modalName = null\">取消</button>\r\n\t\t\t\t\t\t<button class=\"cu-btn bg-green margin-left\"  @click=\"updateDis({'description':Discover.description})\">确定</button>\r\n\t\t\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<u-back-top :scroll-top=\"scrollTop\" icon=\"arrow-up-fill\"></u-back-top>\r\n\t\t<u-action-sheet safe-area-inset-bottom :list=\"actionlist\" v-model=\"actionshow\" @click=\"actionclick\" @close=\"actionclose\" :mask-close-able=\"false\"></u-action-sheet>\r\n\t\t<auth ref=\"auth\"></auth>\r\n\t</view>\r\n</template>\r\n<script>\r\n\timport {\r\n\t\tmapGetters,\r\n\t\tmapMutations\r\n\t} from 'vuex';\r\n\timport {\r\n\t\taui\r\n\t} from '@/common/aui/js/aui.js';\r\n\timport auth from \"@/components/auth.vue\"\r\n\t\r\n\tconst db = uniCloud.database()\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tauth\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tactionlist: [],\r\n\t\t\t\tactionshow: false,\r\n\t\t\t\tSystemInfo: '',\r\n\t\t\t\tmodalName:'',\r\n\t\t\t\tcontList: [{\r\n\t\t\t\t\tpage: 1,\r\n\t\t\t\t\tlimit: 20,\r\n\t\t\t\t\tlist: [],\r\n\t\t\t\t\tload: 'loading',\r\n\t\t\t\t\torderby: \"create_date desc\"\r\n\t\t\t\t}, {\r\n\t\t\t\t\tpage: 1,\r\n\t\t\t\t\tlimit: 20,\r\n\t\t\t\t\tlist: [],\r\n\t\t\t\t\tload: 'loading',\r\n\t\t\t\t\torderby: \"is_top desc,is_best desc,view desc,create_date desc\"\r\n\t\t\t\t}],\r\n\t\t\t\tback:false,\r\n\t\t\t\ttop: 320,\r\n\t\t\t\tcurrent: 0,\r\n\t\t\t\tDiscover: '',\r\n\t\t\t\tpage: 1,\r\n\t\t\t\tlimit: 20,\r\n\t\t\t\tid: '',\r\n\t\t\t\ttitle: '',\r\n\t\t\t\tload: 'loading',\r\n\t\t\t\tscrollTop: 0,\r\n\t\t\t\tnavbar: false,\r\n\t\t\t\tsharetitle: \"校园能手\",\r\n\t\t\t\tsharepath: \"\",\r\n\t\t\t\tavatar: [],\r\n\t\t\t\tshadowStyle: {\r\n\t\t\t\t\tbackgroundImage: \"none\"\r\n\t\t\t\t},\r\n\t\t\t\tsxlist: [{\r\n\t\t\t\t\tname: '最新发布'\r\n\t\t\t\t}, {\r\n\t\t\t\t\tname: '热门动态'\r\n\t\t\t\t}],\r\n\t\t\t\tsxcurrent: 0\r\n\t\t\t};\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapGetters({\r\n\t\t\t\tuserinfo: 'user/info',\r\n\t\t\t\thasLogin: 'user/hasLogin'\r\n\t\t\t})\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tif(this.back){\r\n\t\t\t\tuni.startPullDownRefresh();\r\n\t\t\t\tthis.back=false\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(e) {\r\n\t\t\tthis.SystemInfo = uni.getSystemInfoSync();\r\n\t\t\tthis.id = e.id\r\n\t\t\tthis.title = e.name\r\n\t\t\tthis.sharepath = \"/pages/discover/group/group?id=\" + this.id\r\n\t\t\tthis.sharetitle = this.title + \"-校园能手\"\r\n\t\t\tif (this.id) {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '加载中'\r\n\t\t\t\t});\r\n\t\t\t\tthis.getDiscover()\r\n\t\t\t}\r\n\t\t\tif(this.hasLogin && this.userinfo.is_manage){\r\n\t\t\t\tthis.actionlist=[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttext: '分享',\r\n\t\t\t\t\t\ttype:'button'\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\ttext: '举报' ,\r\n\t\t\t\t\t\tcolor: 'red'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttext: '删除' ,\r\n\t\t\t\t\t\tcolor: 'red',\r\n\t\t\t\t\t\tfontSize: 28,\r\n\t\t\t\t\t\tsubText: '管理员操作'\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}else{\r\n\t\t\t\tthis.actionlist=[\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttext: '分享',\r\n\t\t\t\t\t\ttype:'button'\r\n\t\t\t\t\t}, {\r\n\t\t\t\t\t\ttext: '举报' ,\r\n\t\t\t\t\t\tcolor: 'red'\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t},\r\n\t\tonPageScroll(e) {\r\n\t\t\tif (e.scrollTop > 95) {\r\n\t\t\t\tthis.navbar = true\r\n\t\t\t\tthis.top = 320 + 88 + (this.SystemInfo.statusBarHeight * 2)\r\n\t\t\t} else {\r\n\t\t\t\tthis.top = 320\r\n\t\t\t\tthis.navbar = false\r\n\t\t\t}\r\n\t\t\tthis.scrollTop = e.scrollTop;\r\n\t\t},\r\n\t\tonPullDownRefresh() {\r\n\t\t\tthis.contList[this.sxcurrent].page = 1;\r\n\t\t\tthis.contList[this.sxcurrent].list = [];\r\n\t\t\tthis.contList[this.sxcurrent].load = \"loading\";\r\n\t\t\tthis.getContent()\r\n\t\t},\r\n\t\tonReachBottom() {\r\n\t\t\tif (this.contList[this.sxcurrent].load != \"noMore\") {\r\n\t\t\t\tthis.contList[this.sxcurrent].load = \"loading\"\r\n\t\t\t\tthis.contList[this.sxcurrent].page++\r\n\t\t\t\tthis.getContent()\r\n\t\t\t}\r\n\t\t},\r\n\t\tonShareAppMessage(res) {\r\n\t\t\tif (res.from === 'button') { // 来自页面内分享按钮\r\n\t\t\t\tconsole.log(res.target)\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\ttitle: this.sharetitle,\r\n\t\t\t\tpath: this.sharepath\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tsxchange(index) {\r\n\t\t\t\tthis.sxcurrent = index;\r\n\t\t\t\tif (this.contList[index].list.length == 0) {\r\n\t\t\t\t\tthis.getContent()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tparseLoaded() {\r\n\t\t\t\tthis.$refs.uReadMore.init();\r\n\t\t\t},\r\n\t\t\tupdateGroup(e) {\r\n\t\t\t\tif (this.userinfo && this.userinfo._id == this.Discover.uid) {\r\n\t\t\t\t\tvar that=this;\r\n\t\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\t\tcount: 1,\r\n\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\tif (res.tempFilePaths.length > 0) {\r\n\t\t\t\t\t\t\t\tlet filePath = res.tempFilePaths[0]\r\n\t\t\t\t\t\t\t\tuniCloud.uploadFile({\r\n\t\t\t\t\t\t\t\t\tfilePath: filePath,\r\n\t\t\t\t\t\t\t\t\tcloudPath: 'a.jpg',\r\n\t\t\t\t\t\t\t\t\tonUploadProgress: function(progressEvent) {\r\n\t\t\t\t\t\t\t\t\t\tvar percentCompleted = Math.round(\r\n\t\t\t\t\t\t\t\t\t\t\t(progressEvent.loaded * 100) / progressEvent.total\r\n\t\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tsuccess(suc) {\r\n\t\t\t\t\t\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\t\t\t\t\t\ttitle:\"图片检测中\"\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\tvar images=[];\r\n\t\t\t\t\t\t\t\t\t\timages.push(suc.fileID);\r\n\t\t\t\t\t\t\t\t\t\tuniCloud.callFunction({\r\n\t\t\t\t\t\t\t\t\t\t\tname: \"discover\",\r\n\t\t\t\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\t\t\t\tfunct: \"imgSecCheckRes\",\r\n\t\t\t\t\t\t\t\t\t\t\t\timgs:images\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}).then((resb) => {\r\n\t\t\t\t\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t\t\t\t\t\tif(resb.result.data.length==1){\r\n\t\t\t\t\t\t\t\t\t\t\t\tif(e==\"cover\"){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthat.updateDis({cover:resb.result.data[0]})\r\n\t\t\t\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthat.updateDis({backgroundImage:resb.result.data[0]})\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontent: resb.result.message || '图片检测到异常',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\t\t\t\tcontent: err.message || '请求服务失败',\r\n\t\t\t\t\t\t\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\t\t\tcontent: err.message || '上传失败',\r\n\t\t\t\t\t\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tcomplete() {}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tupdateDis(value){\r\n\t\t\t\tdb.collection('mdsh-discover')\r\n\t\t\t\t.where({\r\n\t\t\t\t\tstatus: true,\r\n\t\t\t\t\t_id: this.id\r\n\t\t\t\t})\r\n\t\t\t\t.update(value).then((res) => {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon:\"success\",\r\n\t\t\t\t\t\ttitle:\"修改成功\"\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.getDiscover()\r\n\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\tcontent: err.message || '请求服务失败',\r\n\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t})\r\n\t\t\t\t}).finally(() => {\r\n\t\t\t\t\tthis.modalName = null\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetDiscover() {\r\n\t\t\t\tdb.collection('mdsh-discover')\r\n\t\t\t\t\t.where({\r\n\t\t\t\t\t\tstatus: true,\r\n\t\t\t\t\t\t_id: this.id\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.get({\r\n\t\t\t\t\t\tgetOne: true\r\n\t\t\t\t\t}).then((res) => {\r\n\t\t\t\t\t\tconst data = res.result.data\r\n\t\t\t\t\t\tif (data) {\r\n\t\t\t\t\t\t\tthis.Discover = data\r\n\t\t\t\t\t\t\tthis.getContent()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\tcontent: err.message || '请求服务失败',\r\n\t\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}).finally(() => {\r\n\r\n\t\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetContent() {\r\n\t\t\t\tlet skip = (this.contList[this.sxcurrent].page - 1) * this.contList[this.sxcurrent].limit;\r\n\t\t\t\tdb.collection('mdsh-discover-content,uni-id-users,mdsh-school')\r\n\t\t\t\t\t.where({\r\n\t\t\t\t\t\tstatus: true,\r\n\t\t\t\t\t\tcid: this.id\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.field(\r\n\t\t\t\t\t\t\"content,view,common_num,images,avatar,up,down,collect_num,is_top,is_best,create_date,uid{nickName,avatar},cid{name,cover},school_id{logo,college_name},location\"\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.orderBy(this.contList[this.sxcurrent].orderby)\r\n\t\t\t\t\t.skip(skip)\r\n\t\t\t\t\t.limit(this.contList[this.sxcurrent].limit)\r\n\t\t\t\t\t.get().then((res) => {\r\n\t\t\t\t\t\tconst data = res.result.data\r\n\t\t\t\t\t\tif (data.length < this.contList[this.sxcurrent].limit) {\r\n\t\t\t\t\t\t\tthis.contList[this.sxcurrent].load = \"noMore\"\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.contList[this.sxcurrent].load = \"more\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tuni.stopPullDownRefresh()\r\n\t\t\t\t\t\tthis.contList[this.sxcurrent].list = this.contList[this.sxcurrent].list.concat(data)\r\n\t\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tuni.stopPullDownRefresh()\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\tcontent: err.message || '请求服务失败',\r\n\t\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}).finally(() => {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tuni.stopPullDownRefresh()\r\n\t\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tshare(res){\r\n\t\t\t\tthis.actionshow=true\r\n\t\t\t\tthis.shareInfo=res\r\n\t\t\t\tthis.sharetitle=res.content\r\n\t\t\t\tthis.sharepath='/pages/discover/detail/detail?id='+res._id\r\n\t\t\t},\r\n\t\t\tactionclose(){\r\n\t\t\t\tthis.sharepath = \"/pages/discover/group/group?id=\" + this.id\r\n\t\t\t\tthis.sharetitle = this.title + \"-校园能手\"\r\n\t\t\t},\r\n\t\t\tactionclick(e){\r\n\t\t\t\tswitch(e){\r\n\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\tif(this.hasLogin){\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.login()\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 2:\r\n\t\t\t\t\tif(this.hasLogin && this.userinfo.is_manage){\r\n\t\t\t\t\t\tthis.admindel()\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ticon:\"none\",\r\n\t\t\t\t\t\t\ttitle:\"无权操作\"\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tadmindel(){\r\n\t\t\t\tvar that=this;\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t    title: '',\r\n\t\t\t\t    content: '确认要删除吗',\r\n\t\t\t\t    success: function (res) {\r\n\t\t\t\t        if (res.confirm) { \r\n\t\t\t\t            db.collection(\"mdsh-discover-content\")\r\n\t\t\t\t              .where({\r\n\t\t\t\t                _id: that.shareInfo._id\r\n\t\t\t\t              })\r\n\t\t\t\t              .remove()\r\n\t\t\t\t                .then((res) => {\r\n\t\t\t\t                    uni.showToast({\r\n\t\t\t\t                        title: '删除成功'\r\n\t\t\t\t                    })\r\n\t\t\t\t                }).catch((err) => {\r\n\t\t\t\t                    uni.showModal({\r\n\t\t\t\t                        content: err.message || '删除失败',\r\n\t\t\t\t                        showCancel: false\r\n\t\t\t\t                    })\r\n\t\t\t\t                }).finally(() => {\r\n\t\t\t\t            \r\n\t\t\t\t                })\r\n\t\t\t\t        } else if (res.cancel) {\r\n\t\t\t\t            console.log('用户点击取消');\r\n\t\t\t\t        }\r\n\t\t\t\t    }\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tactionmenuCallback(e) {\r\n\t\t\t\tvar _this = this;\r\n\t\t\t\tif (e.index == 0) {\r\n\t\t\t\t\tthis.sharepath = \"/pages/discover/group/group?id=\" + this.id\r\n\t\t\t\t\tthis.sharetitle = this.title + \"-校园能手\"\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetuinfo(uid){\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl:\"/user/info/info?uid=\"+uid\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tpostdeta(id) {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: \"/pages/discover/detail/detail?id=\" + id\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\trelease(e){\r\n\t\t\t\tif(this.hasLogin){\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl:\"/pages/discover/release/release?discover=\"+e\r\n\t\t\t\t\t})\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.login()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tlogin(){\r\n\t\t\t\t//#ifdef MP\r\n\t\t\t\tthis.$refs.auth.showpop();\r\n\t\t\t\t//#endif\r\n\t\t\t\t//#ifndef MP\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl:\"/pages/login/login\"\r\n\t\t\t\t})\r\n\t\t\t\t//#endif\r\n\t\t\t},\r\n\t\t\tauthSuccess(){\r\n\t\t\t\t// this.userinfo=uni.getStorageSync('userinfo')\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\n"],"sourceRoot":""}